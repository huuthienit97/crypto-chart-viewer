{"ast":null,"code":"var _jsxFileName = \"/Volumes/Extreme SSD/NodeJs/huuthien.vn/huuthien-realtime-crypto/client/src/components/TradingChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  padding: 20px;\n  height: 400px;\n`;\n_c = Container;\nconst Title = styled.h3`\n  margin-bottom: 15px;\n  color: #a0aec0;\n  font-size: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n_c2 = Title;\nconst TimeFrameButtons = styled.div`\n  display: flex;\n  gap: 5px;\n`;\n_c3 = TimeFrameButtons;\nconst TimeButton = styled.button`\n  padding: 5px 10px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: ${props => props.active ? 'rgba(102, 126, 234, 0.3)' : 'transparent'};\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(102, 126, 234, 0.2);\n  }\n`;\n_c4 = TimeButton;\nconst ChartContainer = styled.div`\n  height: 300px;\n  width: 100%;\n`;\n_c5 = ChartContainer;\nconst TradingChart = ({\n  selectedCrypto,\n  cryptoData\n}) => {\n  _s();\n  var _cryptoData$selectedC3;\n  const [timeFrame, setTimeFrame] = useState('1H');\n  const [chartData, setChartData] = useState([]);\n  const [lastPrice, setLastPrice] = useState(null);\n  const [lastUpdate, setLastUpdate] = useState(0);\n  const [isRealtime, setIsRealtime] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Hàm làm mượt giá để tránh nhảy dữ\n  const smoothPrice = (newPrice, lastPrice) => {\n    if (!lastPrice) return newPrice;\n\n    // Chỉ cập nhật nếu thay đổi > 0.1%\n    const changePercent = Math.abs((newPrice - lastPrice) / lastPrice) * 100;\n    if (changePercent < 0.1) {\n      return lastPrice;\n    }\n\n    // Smoothing với weighted average\n    return lastPrice * 0.7 + newPrice * 0.3;\n  };\n\n  // Tạo dữ liệu biểu đồ từ giá thật\n  useEffect(() => {\n    var _cryptoData$selectedC, _cryptoData$selectedC2;\n    const currentPrice = (_cryptoData$selectedC = cryptoData[selectedCrypto]) === null || _cryptoData$selectedC === void 0 ? void 0 : _cryptoData$selectedC.price;\n    if (!currentPrice) return;\n    const now = Date.now();\n\n    // Debounce: chỉ cập nhật mỗi 2 giây và chỉ khi realtime được bật\n    if (!isRealtime || now - lastUpdate < 2000) return;\n    setLastUpdate(now);\n\n    // Làm mượt giá\n    const smoothedPrice = smoothPrice(currentPrice, lastPrice);\n    setLastPrice(smoothedPrice);\n    const newDataPoint = {\n      time: new Date().toLocaleTimeString('vi-VN', {\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      }),\n      price: parseFloat(smoothedPrice.toFixed(2)),\n      volume: ((_cryptoData$selectedC2 = cryptoData[selectedCrypto]) === null || _cryptoData$selectedC2 === void 0 ? void 0 : _cryptoData$selectedC2.volume) || 0\n    };\n    setChartData(prevData => {\n      const updatedData = [...prevData, newDataPoint];\n\n      // Giữ tối đa 100 điểm dữ liệu\n      if (updatedData.length > 100) {\n        return updatedData.slice(-100);\n      }\n      return updatedData;\n    });\n  }, [(_cryptoData$selectedC3 = cryptoData[selectedCrypto]) === null || _cryptoData$selectedC3 === void 0 ? void 0 : _cryptoData$selectedC3.price, selectedCrypto, lastPrice, lastUpdate]);\n\n  // Lấy dữ liệu lịch sử thật từ API\n  useEffect(() => {\n    const fetchHistoryData = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/history/${selectedCrypto}`);\n        const data = await response.json();\n        if (data.error) {\n          console.error('Lỗi khi lấy dữ liệu lịch sử:', data.error);\n          return;\n        }\n        if (data.length > 0) {\n          setChartData(data);\n          setLastPrice(data[data.length - 1].price);\n        }\n      } catch (error) {\n        console.error('Lỗi khi fetch dữ liệu lịch sử:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    if (selectedCrypto) {\n      fetchHistoryData();\n    }\n  }, [selectedCrypto]);\n  const CustomTooltip = ({\n    active,\n    payload,\n    label\n  }) => {\n    if (active && payload && payload.length) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          borderRadius: '6px',\n          padding: '10px',\n          color: 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: `Thời gian: ${label}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#00ff88'\n          },\n          children: `Giá: $${payload[0].value.toLocaleString()}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#a0aec0'\n          },\n          children: `Volume: ${payload[0].payload.volume.toFixed(0)}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this);\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: [\"\\uD83D\\uDCC8 Bi\\u1EC3u \\u0111\\u1ED3 gi\\xE1 - \", selectedCrypto, /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TimeFrameButtons, {\n          children: ['1H', '4H', '1D', '1W'].map(tf => /*#__PURE__*/_jsxDEV(TimeButton, {\n            active: timeFrame === tf,\n            onClick: () => setTimeFrame(tf),\n            children: tf\n          }, tf, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TimeButton, {\n          active: isRealtime,\n          onClick: () => setIsRealtime(!isRealtime),\n          style: {\n            fontSize: '10px',\n            padding: '4px 8px'\n          },\n          children: isRealtime ? '🟢 Live' : '🔴 Pause'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TimeButton, {\n          onClick: () => {\n            setChartData([]);\n            setLastPrice(null);\n            // Trigger reload\n            const event = new Event('reload');\n            window.dispatchEvent(event);\n          },\n          style: {\n            fontSize: '10px',\n            padding: '4px 8px'\n          },\n          children: \"\\uD83D\\uDD04 Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChartContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '10px',\n          right: '10px',\n          fontSize: '12px',\n          color: isRealtime ? '#00ff88' : '#a0aec0',\n          zIndex: 10\n        },\n        children: isRealtime ? '🟢 Live' : '🔴 Paused'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%',\n          color: '#a0aec0',\n          fontSize: '14px'\n        },\n        children: \"\\uD83D\\uDCCA \\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u l\\u1ECBch s\\u1EED...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this) : chartData.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%',\n          color: '#a0aec0',\n          fontSize: '14px'\n        },\n        children: [\"\\uD83D\\uDCCA Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u cho \", selectedCrypto]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n        width: \"100%\",\n        height: \"100%\",\n        children: /*#__PURE__*/_jsxDEV(LineChart, {\n          data: chartData,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(255, 255, 255, 0.1)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"time\",\n            stroke: \"#a0aec0\",\n            fontSize: 12,\n            tick: {\n              fill: '#a0aec0'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            stroke: \"#a0aec0\",\n            fontSize: 12,\n            tick: {\n              fill: '#a0aec0'\n            },\n            domain: ['auto', 'auto'],\n            tickFormatter: value => `$${value.toLocaleString()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Line, {\n            type: \"monotone\",\n            dataKey: \"price\",\n            stroke: \"#00ff88\",\n            strokeWidth: 2,\n            dot: false,\n            activeDot: {\n              r: 4,\n              fill: '#00ff88'\n            },\n            connectNulls: true,\n            isAnimationActive: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n_s(TradingChart, \"jVZRwQsivjE++lUSFdqyPo1P0a8=\");\n_c6 = TradingChart;\nexport default TradingChart;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"TimeFrameButtons\");\n$RefreshReg$(_c4, \"TimeButton\");\n$RefreshReg$(_c5, \"ChartContainer\");\n$RefreshReg$(_c6, \"TradingChart\");","map":{"version":3,"names":["React","useState","useEffect","styled","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","jsxDEV","_jsxDEV","Container","div","_c","Title","h3","_c2","TimeFrameButtons","_c3","TimeButton","button","props","active","_c4","ChartContainer","_c5","TradingChart","selectedCrypto","cryptoData","_s","_cryptoData$selectedC3","timeFrame","setTimeFrame","chartData","setChartData","lastPrice","setLastPrice","lastUpdate","setLastUpdate","isRealtime","setIsRealtime","isLoading","setIsLoading","smoothPrice","newPrice","changePercent","Math","abs","_cryptoData$selectedC","_cryptoData$selectedC2","currentPrice","price","now","Date","smoothedPrice","newDataPoint","time","toLocaleTimeString","hour","minute","second","parseFloat","toFixed","volume","prevData","updatedData","length","slice","fetchHistoryData","response","fetch","data","json","error","console","CustomTooltip","payload","label","style","backgroundColor","border","borderRadius","padding","color","children","fileName","_jsxFileName","lineNumber","columnNumber","value","toLocaleString","display","gap","alignItems","map","tf","onClick","fontSize","event","Event","window","dispatchEvent","position","top","right","zIndex","justifyContent","height","width","strokeDasharray","stroke","dataKey","tick","fill","domain","tickFormatter","content","type","strokeWidth","dot","activeDot","r","connectNulls","isAnimationActive","_c6","$RefreshReg$"],"sources":["/Volumes/Extreme SSD/NodeJs/huuthien.vn/huuthien-realtime-crypto/client/src/components/TradingChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\n\nconst Container = styled.div`\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  padding: 20px;\n  height: 400px;\n`;\n\nconst Title = styled.h3`\n  margin-bottom: 15px;\n  color: #a0aec0;\n  font-size: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst TimeFrameButtons = styled.div`\n  display: flex;\n  gap: 5px;\n`;\n\nconst TimeButton = styled.button`\n  padding: 5px 10px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: ${props => props.active ? 'rgba(102, 126, 234, 0.3)' : 'transparent'};\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(102, 126, 234, 0.2);\n  }\n`;\n\nconst ChartContainer = styled.div`\n  height: 300px;\n  width: 100%;\n`;\n\nconst TradingChart = ({ selectedCrypto, cryptoData }) => {\n  const [timeFrame, setTimeFrame] = useState('1H');\n  const [chartData, setChartData] = useState([]);\n  const [lastPrice, setLastPrice] = useState(null);\n  const [lastUpdate, setLastUpdate] = useState(0);\n  const [isRealtime, setIsRealtime] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Hàm làm mượt giá để tránh nhảy dữ\n  const smoothPrice = (newPrice, lastPrice) => {\n    if (!lastPrice) return newPrice;\n    \n    // Chỉ cập nhật nếu thay đổi > 0.1%\n    const changePercent = Math.abs((newPrice - lastPrice) / lastPrice) * 100;\n    if (changePercent < 0.1) {\n      return lastPrice;\n    }\n    \n    // Smoothing với weighted average\n    return lastPrice * 0.7 + newPrice * 0.3;\n  };\n\n  // Tạo dữ liệu biểu đồ từ giá thật\n  useEffect(() => {\n    const currentPrice = cryptoData[selectedCrypto]?.price;\n    if (!currentPrice) return;\n\n    const now = Date.now();\n    \n    // Debounce: chỉ cập nhật mỗi 2 giây và chỉ khi realtime được bật\n    if (!isRealtime || now - lastUpdate < 2000) return;\n    setLastUpdate(now);\n\n    // Làm mượt giá\n    const smoothedPrice = smoothPrice(currentPrice, lastPrice);\n    setLastPrice(smoothedPrice);\n\n    const newDataPoint = {\n      time: new Date().toLocaleTimeString('vi-VN', { \n        hour: '2-digit', \n        minute: '2-digit',\n        second: '2-digit'\n      }),\n      price: parseFloat(smoothedPrice.toFixed(2)),\n      volume: cryptoData[selectedCrypto]?.volume || 0\n    };\n\n    setChartData(prevData => {\n      const updatedData = [...prevData, newDataPoint];\n      \n      // Giữ tối đa 100 điểm dữ liệu\n      if (updatedData.length > 100) {\n        return updatedData.slice(-100);\n      }\n      \n      return updatedData;\n    });\n  }, [cryptoData[selectedCrypto]?.price, selectedCrypto, lastPrice, lastUpdate]);\n\n  // Lấy dữ liệu lịch sử thật từ API\n  useEffect(() => {\n    const fetchHistoryData = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/history/${selectedCrypto}`);\n        const data = await response.json();\n        \n        if (data.error) {\n          console.error('Lỗi khi lấy dữ liệu lịch sử:', data.error);\n          return;\n        }\n        \n        if (data.length > 0) {\n          setChartData(data);\n          setLastPrice(data[data.length - 1].price);\n        }\n      } catch (error) {\n        console.error('Lỗi khi fetch dữ liệu lịch sử:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    if (selectedCrypto) {\n      fetchHistoryData();\n    }\n  }, [selectedCrypto]);\n\n  const CustomTooltip = ({ active, payload, label }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div style={{\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          borderRadius: '6px',\n          padding: '10px',\n          color: 'white'\n        }}>\n          <p>{`Thời gian: ${label}`}</p>\n          <p style={{ color: '#00ff88' }}>{`Giá: $${payload[0].value.toLocaleString()}`}</p>\n          <p style={{ color: '#a0aec0' }}>{`Volume: ${payload[0].payload.volume.toFixed(0)}`}</p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <Container>\n      <Title>\n        📈 Biểu đồ giá - {selectedCrypto}\n        <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\n          <TimeFrameButtons>\n            {['1H', '4H', '1D', '1W'].map(tf => (\n              <TimeButton\n                key={tf}\n                active={timeFrame === tf}\n                onClick={() => setTimeFrame(tf)}\n              >\n                {tf}\n              </TimeButton>\n            ))}\n          </TimeFrameButtons>\n          <TimeButton\n            active={isRealtime}\n            onClick={() => setIsRealtime(!isRealtime)}\n            style={{ fontSize: '10px', padding: '4px 8px' }}\n          >\n            {isRealtime ? '🟢 Live' : '🔴 Pause'}\n          </TimeButton>\n          <TimeButton\n            onClick={() => {\n              setChartData([]);\n              setLastPrice(null);\n              // Trigger reload\n              const event = new Event('reload');\n              window.dispatchEvent(event);\n            }}\n            style={{ fontSize: '10px', padding: '4px 8px' }}\n          >\n            🔄 Refresh\n          </TimeButton>\n        </div>\n      </Title>\n      \n      <ChartContainer>\n        <div style={{ \n          position: 'absolute', \n          top: '10px', \n          right: '10px', \n          fontSize: '12px', \n          color: isRealtime ? '#00ff88' : '#a0aec0',\n          zIndex: 10 \n        }}>\n          {isRealtime ? '🟢 Live' : '🔴 Paused'}\n        </div>\n        \n        {isLoading ? (\n          <div style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            height: '100%',\n            color: '#a0aec0',\n            fontSize: '14px'\n          }}>\n            📊 Đang tải dữ liệu lịch sử...\n          </div>\n        ) : chartData.length === 0 ? (\n          <div style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            height: '100%',\n            color: '#a0aec0',\n            fontSize: '14px'\n          }}>\n            📊 Không có dữ liệu cho {selectedCrypto}\n          </div>\n        ) : (\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <LineChart data={chartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\n              <XAxis \n                dataKey=\"time\" \n                stroke=\"#a0aec0\"\n                fontSize={12}\n                tick={{ fill: '#a0aec0' }}\n              />\n                          <YAxis \n              stroke=\"#a0aec0\"\n              fontSize={12}\n              tick={{ fill: '#a0aec0' }}\n              domain={['auto', 'auto']}\n              tickFormatter={(value) => `$${value.toLocaleString()}`}\n            />\n              <Tooltip content={<CustomTooltip />} />\n              <Line \n                type=\"monotone\" \n                dataKey=\"price\" \n                stroke=\"#00ff88\" \n                strokeWidth={2}\n                dot={false}\n                activeDot={{ r: 4, fill: '#00ff88' }}\n                connectNulls={true}\n                isAnimationActive={false}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        )}\n      </ChartContainer>\n    </Container>\n  );\n};\n\nexport default TradingChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}